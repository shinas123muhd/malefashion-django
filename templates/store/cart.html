{% extends 'base.html' %}



{% load static %}

{% block content %}
<script>
    document.getElementById('preloder').style.display = 'none'
</script>
    
    {% if not cart_items %}
    <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-6 text-center">
            
            <h2 class="mt-4">Your Shopping Cart is Empty</h2>
            <p class="lead">Looks like you haven't added anything to your cart yet.</p>
            <a href="{% url 'store' %}" class="btn btn-primary btn-lg mt-3">Continue Shopping</a>
          </div>
        </div>
      </div>
    {% else %}
    <section class="shopping-cart spad">
    <div class="container">
    <div class="row">
    <div class="col-lg-8">
    <div class="shopping__cart__table">
    
    <table>
    <thead>
    <tr>
    <th>Product</th>
    <th>Quantity</th>
    <th>Total</th>
    <th></th>
    </tr>
    </thead>
    <tbody>
    {% for cart_item in cart_items %}
    <tr>
    <td class="">
    <div class="">
    <img src="{{ cart_item.product.image.url }}" class='w-25' alt="">
    </div>
    <div class="product__cart__item__text">
    <h6>{{ cart_item.product.product_name }}</h6>
    <span >${{ cart_item.product.price }}</span>
    </div>
    {% if cart_item.variation.all %}
    {% for item in cart_items.variation.all %}
    {{ item.variation_category }}:{{ item.variation_value }}
    {% endfor %}
    {% endif %}
    </td>    
    <td class="">
    <div>
    <div class="col">
        <div class="input-group input-spinner">
            <div class="input-group-prepend">
            <a href="{% url 'remove_cart' cart_item.product.id %}" class="btn btn-light" type="submit" id="button-plus"> <i class="fa fa-minus"></i> </a>
            </div>
            <input type="text" class="w-25 text-center" style='border: 1px solid #fff;'  readonly value="{{ cart_item.quantity }}">
            <div class="input-group-append">                                    
            <a href="{% url 'add_cart' cart_item.product.id %}"  class="btn btn-light" type="submit" id="button-minus"> <i class="fa fa-plus"></i> </a>                
            </div>
        </div> <!-- input-group.// -->
    </div>
    </td> 
    
    <td >${{ cart_item.sub_total }}</td>
    <td style='width:5rem'></td>
    <td >
        <form action="{% url 'remove_item_cart' cart_item.product.id %}" method="post">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger"><i class="fa fa-close"></i></button>
        </form>
      </td>
    </tr>
    {% endfor %}
    
    
    </tbody>
    </table>
    </div>
    <div class="row">
    <div class="col-lg-6 col-md-6 col-sm-6">
    <div class="continue__btn">
    <a href="{% url 'store' %}">Continue Shopping</a>
    </div>
    </div>
    
    </div>
    </div>
    <div class="col-lg-4">
    <div class="cart__discount">
    <h6>Discount codes</h6>
    <form action="#">
    <input type="text" placeholder="Coupon code">
    <button type="submit">Apply</button>
    </form>
    </div>
    <div class="cart__total">
    <h6>Cart total</h6>
    <ul>
    
    <li>Total <span>$ {{ total }}</span></li>
    <li>Tax <span>$ {{ tax }}</span></li>
    <li>Grand Total <span>$ {{ grand_total }}</span></li>
    </ul>
    <a href="{% url 'checkout' %}" class="primary-btn">Proceed to checkout</a>
    </div>
    </div>
    </div>
    </div>
    </section>
    {% endif %}

{% endblock %}


